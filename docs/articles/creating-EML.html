<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating EML Using EDIutils • EDIutils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating EML Using EDIutils">
<meta property="og:description" content="EDIutils">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EDIutils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/creating-EML.html">EML Template Helper</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating EML Using EDIutils</h1>
            
      
      
      <div class="hidden name"><code>creating-EML.Rmd</code></div>

    </div>

    
    
<p>The following libraries are needed to create a working EML document.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CVPIA-OSC.github.io/EDIutils/">EDIutils</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/EML">EML</a></span><span class="op">)</span></pre></div>
<p>In this document, we create an EML file which has the opportunity to append the following elements:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">-</span> eml </a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="kw">-</span>dataset</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">    <span class="kw">-</span> creator</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="kw">-</span> contact</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="kw">-</span> associated party </a>
<a class="sourceLine" id="cb2-6" data-line-number="6">    <span class="kw">-</span> title </a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    <span class="kw">-</span> short name </a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="kw">-</span> abstract </a>
<a class="sourceLine" id="cb2-9" data-line-number="9">    <span class="kw">-</span> keyword set </a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="kw">-</span> intellectual rights </a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    <span class="kw">-</span> license </a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="kw">-</span> methods </a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="kw">-</span> maintenance </a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="kw">-</span> coverage </a>
<a class="sourceLine" id="cb2-15" data-line-number="15">      <span class="kw">-</span> geographic coverage </a>
<a class="sourceLine" id="cb2-16" data-line-number="16">      <span class="kw">-</span> temporal coverage </a>
<a class="sourceLine" id="cb2-17" data-line-number="17">      <span class="kw">-</span> taxonomic coverage </a>
<a class="sourceLine" id="cb2-18" data-line-number="18">    <span class="kw">-</span> data table </a>
<a class="sourceLine" id="cb2-19" data-line-number="19">      <span class="kw">-</span> physical </a>
<a class="sourceLine" id="cb2-20" data-line-number="20">      <span class="kw">-</span> attribute list </a>
<a class="sourceLine" id="cb2-21" data-line-number="21">      <span class="kw">-</span> methods </a></code></pre></div>
<div id="our-example" class="section level2">
<h2 class="hasAnchor">
<a href="#our-example" class="anchor"></a>Our Example</h2>
<p>We will use the data provided by John Hannon to show an example of how to put the metadata together in a way which can be uploaded to the EDI data portal website. The excel sheet of which Hannon’s data resides is found in “~/data-raw/template/template.xlsx”. This file can be edited with your data and used with this document to create your own working EML file.</p>
</div>
<div id="creating-eml" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-eml" class="anchor"></a>Creating EML</h2>
<p>The tabs of the excel file are organized in the order of which this template appends information. We start with the simpler pieces of information such as <code>personnel</code> and <code>title</code> and work up to appending the data table, which has other components to it.</p>
<div id="creating-the-parent-element" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-the-parent-element" class="anchor"></a>Creating the Parent Element</h3>
<p>We first need to create a parent element. This will be a list of which our metadata inputs can be appended to.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span> </pre></div>
</div>
<div id="publication-date" class="section level3">
<h3 class="hasAnchor">
<a href="#publication-date" class="anchor"></a>Publication Date</h3>
<p>The publication date does not have a tab in the excel sheet, but is simply added with the <code>add_pub_date</code> function. If no date is provided, it will automatically append the current date. This can be overwritten by providing an input for <code>date</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_pub_date.html">add_pub_date</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, date <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></pre></div>
</div>
<div id="personnel-creator-contact-and-associated-parties-" class="section level3">
<h3 class="hasAnchor">
<a href="#personnel-creator-contact-and-associated-parties-" class="anchor"></a>Personnel: Creator, Contact, and Associated Parties.</h3>
<p>The <code>add_personnel</code> function allows you to append information on the creator or the associated parties to your file. The creator would be any person or organization who is responsible for the creation of the data, while an associated party would be any person or organization which is associated to the dataset. The creator will also be the contact for this datset. Multiple creators, associated parties, and a mixture of both can be appended to the EML file by providing all inputs in the “personnel” tab in the “template.xlsx” excel file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">personnel_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"personnel"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">personnel_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">personnel_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_personnel.html">add_personnel</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, 
                                  first_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">first_name</span>, 
                                  last_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">last_name</span>, 
                                  email <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">email</span>, 
                                  role <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">role</span>, 
                                  orcid <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">orcid</span><span class="op">)</span>
<span class="op">}</span></pre></div>
</div>
<div id="title-and-short-name" class="section level3">
<h3 class="hasAnchor">
<a href="#title-and-short-name" class="anchor"></a>Title and Short Name</h3>
<p>Following the personnel element, we can append the title elements. The <code>add_title</code> function allows you to append the title and short name of the dataset to the file. Only one title and short name should be appended. The title should be fairly descriptive and between 7 and 20 words long. The short name must be less than the number of words present in the title and is your opportunity to give viewers a more accessible name to the dataset. Again, this information can be added to the “title” tab in the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"title"</span><span class="op">)</span>
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_title.html">add_title</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, title <span class="op">=</span> <span class="va">title</span><span class="op">$</span><span class="va">title</span>, 
                            short_name <span class="op">=</span> <span class="va">title</span><span class="op">$</span><span class="va">short_name</span><span class="op">)</span></pre></div>
</div>
<div id="keyword-set" class="section level3">
<h3 class="hasAnchor">
<a href="#keyword-set" class="anchor"></a>Keyword Set</h3>
<p>The next item we will append is the keyword set. We can use the <code>add_keyword_set</code> function to do so. The keyword set should include a list of words under a controlled vocabulary, that helps better identify your dataset and if it will be applicable to viewers. A keyword thesaurus is helpful and will provide viewers a better idea of the data, but is not mandatory. Multiple keyword sets can be provided. This information can be added to the “keyword_set” tab in the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">keyword_set</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"keyword_set"</span><span class="op">)</span>
<span class="va">thesaurus</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">keyword_set</span><span class="op">$</span><span class="va">keywordThesaurus</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">thesaurus</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">keywords</span> <span class="op">&lt;-</span> <span class="va">keyword_set</span><span class="op">$</span><span class="va">keyword</span><span class="op">[</span><span class="va">keyword_set</span><span class="op">$</span><span class="va">keywordThesaurus</span> <span class="op">==</span> <span class="va">thesaurus</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_keyword_set.html">add_keyword_set</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, 
                                    keyword_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="va">keywords</span>, 
                                                       keywordThesaurus <span class="op">=</span> <span class="va">thesaurus</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></pre></div>
</div>
<div id="abstract" class="section level3">
<h3 class="hasAnchor">
<a href="#abstract" class="anchor"></a>Abstract</h3>
<p>Next, we will use the <code>add_abstract</code> function to append the abstract of the dataset to your file. The abstract should include basic information on the dataset that gives a brief summary to the viewers of what they are observing from the data. This information will not be added to the “template.xlsx” excel sheet, but rather the “hannon_example_abstract.docx”. The text provided can be deleted and replaced with your own. From there, the file path of your word document can be added to the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">abstract</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"abstract"</span><span class="op">)</span>
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_abstract.html">add_abstract</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, 
                               abstract <span class="op">=</span> <span class="va">abstract</span><span class="op">$</span><span class="va">abstract</span><span class="op">)</span></pre></div>
</div>
<div id="license-and-intellectual-rights" class="section level3">
<h3 class="hasAnchor">
<a href="#license-and-intellectual-rights" class="anchor"></a>License and Intellectual Rights</h3>
<p>Following the abstract, we will append the license and intellectual rights information. The <code>add_license</code> function allows you to append the licensing and usage information to your file. The <code>intellectual_rights_description</code> input calls for the description of rights, which may be explained in the license you are using. It can also contain other requirements for use, other requirements for attribution, etc. Both the CC0 and CCBY licenses can be chosen as defaults using this function, and the rest of the information will be appended for you. Only one license should be appended. This information can be added to the “license” tab in the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="va">license</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"license"</span><span class="op">)</span>
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_license.html">add_license</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, default_license <span class="op">=</span> <span class="va">license</span><span class="op">$</span><span class="va">default_license</span><span class="op">)</span></pre></div>
<p>If a default license is not being used, then the other inputs need to be provided.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="co"># parent_element &lt;- add_license(parent_element = parent_element, </span>
<span class="co">#                               license_name = license$license_name,</span>
<span class="co">#                               license_url = license$license_url,</span>
<span class="co">#                               license_identifier = license$license_identifier,</span>
<span class="co">#                               intellectual_rights_description = license$intellectual_rights_description)</span></pre></div>
</div>
<div id="funding" class="section level3">
<h3 class="hasAnchor">
<a href="#funding" class="anchor"></a>Funding</h3>
<p>Funding should be appended next. The <code>add_funding</code> function allows you to append both the description of the funding you have recieved as well as the organization you recieved the funding from. Multiple funders can be appended if necessary and information should be added to the “funding” tab in the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">funding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"funding"</span><span class="op">)</span>
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_funding.html">add_funding</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, 
                              funder_name <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">funder_name</span>,
                              funder_identifier <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">funder_identifier</span>,
                              award_number <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">award_number</span>,
                              award_title <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">award_title</span>,
                              award_url <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">award_url</span>,
                              funding_description <span class="op">=</span> <span class="va">funding</span><span class="op">$</span><span class="va">funding_description</span><span class="op">)</span></pre></div>
</div>
<div id="maintenance" class="section level3">
<h3 class="hasAnchor">
<a href="#maintenance" class="anchor"></a>Maintenance</h3>
<p>The maintenance of a dataset is simply if the data collection is complete or ongoing. The <code>add_maintenance</code> function allows you to append the status of the dataset to your file and the inputs of <code>complete</code> and <code>ongoing</code> are the only ones allowed. If the dataset is still in progress, the frequency of which it is updated must be provided as well. This information should be added to the “maintenance” tab in the excel file “template.xlsx”.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">maintenance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"maintenance"</span><span class="op">)</span>
<span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_maintenance.html">add_maintenance</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, status <span class="op">=</span> <span class="va">maintenance</span><span class="op">$</span><span class="va">status</span>,
                                  update_frequency <span class="op">=</span> <span class="va">maintenance</span><span class="op">$</span><span class="va">update_frequency</span><span class="op">)</span></pre></div>
</div>
<div id="dataset-methods" class="section level3">
<h3 class="hasAnchor">
<a href="#dataset-methods" class="anchor"></a>Dataset Methods</h3>
<p>Overall methods can be appended next. The <code>add_method</code> function allows you to append the different scientific methods used in the collection process of your data. Methods are appended in a similar fashion as the abstract. A template methods document is given (“hannon_example_methods.docx”). If more methods are needed, you can create seperate word documents and provide all of the file paths in the “template.xlsx” excel sheet. The methods can be applied here as well as in the data table element, so make sure you are appending the correct methods to the accurate places. Top level methods can describe how a particular csv data was collected, while a data table method can explain how particular attributes in the data table were collected.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">method_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"methods"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">method_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">method_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">new_method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_method.html">add_method</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>, methods_file <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">methods_file</span>,
                           instrumentation <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">instrumentation</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">parent_element</span><span class="op">$</span><span class="va">methods</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">parent_element</span><span class="op">$</span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="va">new_method</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">parent_element</span><span class="op">$</span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">parent_element</span><span class="op">$</span><span class="va">methods</span>, <span class="va">new_method</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></pre></div>
</div>
<div id="coverage-geographic-temporal-taxonomic" class="section level3">
<h3 class="hasAnchor">
<a href="#coverage-geographic-temporal-taxonomic" class="anchor"></a>Coverage: Geographic, Temporal, Taxonomic</h3>
<p>Next, the coverage information is appended. The <code>add_coverage</code> function allows you to append full coverage information to your file. The function itself requires inputs for both temporal and geographic coverage. Taxonomic coverage, is optional and can be appended using the <code>add_taxonomic_coverage</code> function. Chinook, Delta Smelt, Steelhead, White Sturgeon, and Green Sturgeon are all default options, with full taxonomic coverage already present for easy appendage as these are all frequent species being studied under CVPIA. If taxonomic coverage is being appended, this information needs to be appended first. It is not appended to the <code>parent_element</code>, however, and is instead appended to a new empty list that we title <code>taxonomic_coverage</code>. The taxonomic coverage information can still be added to the “template.xlsx” excel file on the tab “taxonomic_coverage”, even though the information is not being appended to the <code>parent_element</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="va">taxonomic_coverage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">taxonomic_coverage_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"taxonomic_coverage"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">taxonomic_coverage_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">taxonomic_coverage_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">new_taxon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_taxonomic_coverage.html">add_taxonomic_coverage</a></span><span class="op">(</span>CVPIA_common_species <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">CVPIA_common_species</span>,
                                     kingdom_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">kingdom_value</span>,
                                     phylum_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">phylum_value</span>,
                                     class_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">class_value</span>,
                                     order_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">order_value</span>,
                                     family_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">family_value</span>,
                                     genus_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">genus_value</span>,
                                     species_value <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">species_value</span>,
                                     common_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">common_name</span>,
                                     taxon_id <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">taxon_id</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">taxonomic_coverage</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">taxonomic_coverage</span> <span class="op">&lt;-</span> <span class="va">new_taxon</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">taxonomic_coverage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html">append</a></span><span class="op">(</span><span class="va">taxonomic_coverage</span>, <span class="va">new_taxon</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></pre></div>
<p>From here, we then have to append the coverage information to the <code>parent_element</code>. There are three options of doing so.</p>
<div id="no-taxonomic-coverage" class="section level4">
<h4 class="hasAnchor">
<a href="#no-taxonomic-coverage" class="anchor"></a>No Taxonomic Coverage</h4>
<p>The first option is that we have no taxonomic coverage present. This can take either one or multiple coverage inputs and append to the <code>parent_element</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">coverage_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"coverage"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">coverage_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">coverage_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_coverage.html">add_coverage</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>,
                                 geographic_description <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">geographic_description</span>,
                                 west_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">west_bounding_coordinate</span>,
                                 east_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">east_bounding_coordinate</span>,
                                 north_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">north_bounding_coordinate</span>,
                                 south_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">south_bounding_coordinate</span>,
                                 begin_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">begin_date</span>,
                                 end_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">end_date</span><span class="op">)</span>
<span class="op">}</span> </pre></div>
</div>
<div id="unique-taxonomic-coverage-for-multiple-coverages" class="section level4">
<h4 class="hasAnchor">
<a href="#unique-taxonomic-coverage-for-multiple-coverages" class="anchor"></a>Unique Taxonomic Coverage For Multiple Coverages:</h4>
<p>If we have multiple coverages, and a unique taxonomic coverage that goes along with each specific coverage, we can use this instead:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="va">coverage_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"coverage"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">coverage_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">coverage_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">tax</span> <span class="op">&lt;-</span> <span class="va">taxonomic_coverage</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_coverage.html">add_coverage</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>,
                                 geographic_description <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">geographic_description</span>,
                                 west_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">west_bounding_coordinate</span>,
                                 east_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">east_bounding_coordinate</span>,
                                 north_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">north_bounding_coordinate</span>,
                                 south_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">south_bounding_coordinate</span>,
                                 begin_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">begin_date</span>,
                                 end_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">end_date</span>,
                                 taxonomic_coverage <span class="op">=</span> <span class="va">tax</span><span class="op">)</span>
<span class="op">}</span> </pre></div>
</div>
<div id="taxonomic-coverage-for-total-coverage" class="section level4">
<h4 class="hasAnchor">
<a href="#taxonomic-coverage-for-total-coverage" class="anchor"></a>Taxonomic Coverage For Total Coverage</h4>
<p>Finally, if we have multiple taxonomic coverages that need to be appended to one overall coverage, we can do the following:</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="va">coverage_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"coverage"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">coverage_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">coverage_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_coverage.html">add_coverage</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>,
                                 geographic_description <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">geographic_description</span>,
                                 west_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">west_bounding_coordinate</span>,
                                 east_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">east_bounding_coordinate</span>,
                                 north_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">north_bounding_coordinate</span>,
                                 south_bounding_coordinate <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">south_bounding_coordinate</span>,
                                 begin_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">begin_date</span>,
                                 end_date <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">end_date</span>,
                                 taxonomic_coverage <span class="op">=</span> <span class="va">taxonomic_coverage</span><span class="op">)</span>
<span class="op">}</span> </pre></div>
</div>
</div>
<div id="data-table" class="section level3">
<h3 class="hasAnchor">
<a href="#data-table" class="anchor"></a>Data Table</h3>
<p>Next, we need to create the data table. <code>physical</code>, <code>attribute_list</code>, and potentially <code>methods</code> are all lists which must be appended to the data table list. Because of this, we have to create these additional lists first, to append to our <code>parent_element</code> list.</p>
<div id="physical" class="section level4">
<h4 class="hasAnchor">
<a href="#physical" class="anchor"></a>Physical</h4>
<p>The physical element can be created first using the <code>add_physical</code> function. This will append information on the actual physical information of the data. The file path of the data can be added to the “template.xlsx” excel file and all parameters will be appended, gathering the csv’s unique size and authentication, as well as providing the default physical values of a csv.</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="va">physical_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">physical_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"physical"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">physical_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">physical_table</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>
  <span class="va">new_physical</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_physical.html">add_physical</a></span><span class="op">(</span>file_path <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">file_path</span>, 
                               data_url <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">data_url</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">physical_list</span><span class="op">$</span><span class="va">physical</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">physical_list</span><span class="op">$</span><span class="va">physical</span> <span class="op">&lt;-</span> <span class="va">new_physical</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">physical_list</span><span class="op">$</span><span class="va">physical</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">physical_list</span><span class="op">$</span><span class="va">physical</span>, <span class="va">new_physical</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></pre></div>
<p>If you wish to provide alternative information than the defaults of a csv, you must do so manually in Rstudio using the <code>add_physical</code> function fully. It is not recommended that you do so, however, as the default values present represent the best practices in most cases.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="co"># physical_list &lt;- list()</span>
<span class="co"># physical_list &lt;- add_physical(file_path = file_path, </span>
<span class="co">#                                number_of_headers = number_of_headers,</span>
<span class="co">#                                record_delimiter = record_delimiter,</span>
<span class="co">#                                attribute_orientation = attribute_orientation,</span>
<span class="co">#                                field_delimiter = field_delimiter,</span>
<span class="co">#                                data_url = data_url)</span></pre></div>
</div>
<div id="attribute-list" class="section level4">
<h4 class="hasAnchor">
<a href="#attribute-list" class="anchor"></a>Attribute List</h4>
<p>Next, we will need to append an attribute list to the data table. We will be able to use the <code>add_attribute</code> function to do so. Please make sure you review what type of attribute you are providing and what inputs are necessary. These values can then be inputted into the “attribute” tab in the “template.xlsx” excel file. If you are using a “nominal” or “ordinal” attribute which is “enumerated”, (it has a specific code definition), please also use the tab “code_definitions”. Provide each unique code and definition, with its <code>attribute_name</code> alligning to that which is in the “attirbute” tab. An example is present curently to help better showcase this.</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="va">attribute_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"code_definitions"</span><span class="op">)</span>
<span class="va">attribute_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">codes</span><span class="op">$</span><span class="va">attribute_name</span><span class="op">)</span>
<span class="va">attribute_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"attribute"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">attribute_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">attribute_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">current</span><span class="op">$</span><span class="va">domain</span> <span class="op">%in%</span> <span class="st">"enumerated"</span><span class="op">)</span> <span class="op">{</span> 
    <span class="va">definition</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
    <span class="va">current_codes</span> <span class="op">&lt;-</span> <span class="va">codes</span><span class="op">[</span><span class="va">codes</span><span class="op">$</span><span class="va">attribute_name</span> <span class="op">==</span> <span class="va">current</span><span class="op">$</span><span class="va">attribute_name</span>, <span class="op">]</span>
    <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">current_codes</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
      <span class="va">codeDefinition</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>code <span class="op">=</span> <span class="va">current_codes</span><span class="op">$</span><span class="va">code</span><span class="op">[</span><span class="va">j</span><span class="op">]</span>, definition <span class="op">=</span> <span class="va">current_codes</span><span class="op">$</span><span class="va">definitions</span><span class="op">[</span><span class="va">j</span><span class="op">]</span><span class="op">)</span>
      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">definition</span><span class="op">$</span><span class="va">codeDefinition</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">definition</span><span class="op">$</span><span class="va">codeDefinition</span> <span class="op">&lt;-</span> <span class="va">codeDefinition</span>
      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
        <span class="va">definition</span><span class="op">$</span><span class="va">codeDefinition</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">definition</span><span class="op">$</span><span class="va">codeDefinition</span>, <span class="va">codeDefinition</span><span class="op">)</span>
      <span class="op">}</span>
    <span class="op">}</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">definition</span> <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">definition</span>
  <span class="op">}</span>
  <span class="va">new_attribute</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_attribute.html">add_attribute</a></span><span class="op">(</span>attribute_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">attribute_name</span>,
                                 attribute_definition <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">attribute_definition</span>,
                                 storage_type <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">storage_type</span>,
                                 measurement_scale <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">measurement_scale</span>,
                                 domain <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">domain</span>,
                                 definition <span class="op">=</span> <span class="va">definition</span>,
                                 text_pattern <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">text_pattern</span>,
                                 type <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">type</span>,
                                 units <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">units</span>,
                                 unit_precision <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">unit_precision</span>,
                                 number_type <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">number_type</span>,
                                 date_time_format <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">date_time_format</span>,
                                 date_time_precision <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">date_time_precision</span>,
                                 minimum <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">minimum</span>,
                                 maximum <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">maximum</span>,
                                 attribute_label <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">attribute_label</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">attribute_list</span><span class="op">$</span><span class="va">attribute</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">attribute_list</span><span class="op">$</span><span class="va">attribute</span> <span class="op">&lt;-</span> <span class="va">new_attribute</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">attribute_list</span><span class="op">$</span><span class="va">attribute</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">attribute_list</span><span class="op">$</span><span class="va">attribute</span>, <span class="va">new_attribute</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></pre></div>
</div>
</div>
<div id="methods" class="section level3">
<h3 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h3>
<p>Finally, if there are any methods which you would like to include at the data table level, you can do so here. It is optional, but as stated before, can be included in both places if necessary. Like the previous methods, a document needs to be created which holds all of your methods, and the file path can be added to the “data_table_methods” tab in the “template.xlsx” excel sheet.</p>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="va">method_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">data_table_methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"data_table_methods"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data_table_methods</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">data_table_methods</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">new_method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_method.html">add_method</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">method_list</span>, methods_file <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">methods_file</span>,
                            instrumentation <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">instrumentation</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">method_list</span><span class="op">$</span><span class="va">methods</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">method_list</span><span class="op">$</span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="va">new_method</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="va">method_list</span><span class="op">$</span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">method_list</span><span class="op">$</span><span class="va">methods</span>, <span class="va">new_method</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span></pre></div>
</div>
<div id="putting-the-data-table-together" class="section level3">
<h3 class="hasAnchor">
<a href="#putting-the-data-table-together" class="anchor"></a>Putting the Data Table Together</h3>
<p>Now that we have the <code>attribute_list</code>, <code>physical</code> information, and <code>methods</code>, we can compose the data table, which is the last element we need to create our working EML file. The remaining inputs for the data table can be put in the “data_table” tab in the “template.xlsx” excel file. Multiple data tables can be appended to one dataset, although it is more common to only have one present.</p>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="va">data_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"data_table"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">data_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">phy</span> <span class="op">&lt;-</span> <span class="va">physical_list</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">att</span> <span class="op">&lt;-</span> <span class="va">attribute_list</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">method</span> <span class="op">&lt;-</span> <span class="va">method_list</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_table.html">add_data_table</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>,
                                   entity_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">entity_name</span>,
                                   entity_description <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">entity_description</span>,
                                   physical <span class="op">=</span> <span class="va">phy</span>,
                                   attribute_list <span class="op">=</span> <span class="va">att</span>,
                                   methods <span class="op">=</span> <span class="va">method</span>,
                                   number_of_records <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">number_of_records</span>,
                                   alternate_identifier <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">alternate_identifier</span><span class="op">)</span>
<span class="op">}</span></pre></div>
<p>If methods are not present at this level, make sure to take it out.</p>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="va">data_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data-raw/template/template.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"data_table"</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data_table</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">current</span> <span class="op">&lt;-</span> <span class="va">data_table</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>
  <span class="va">phy</span> <span class="op">&lt;-</span> <span class="va">physical_list</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">att</span> <span class="op">&lt;-</span> <span class="va">attribute_list</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>
  <span class="va">parent_element</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_table.html">add_data_table</a></span><span class="op">(</span>parent_element <span class="op">=</span> <span class="va">parent_element</span>,
                                   entity_name <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">entity_name</span>,
                                   entity_description <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">entity_description</span>,
                                   physical <span class="op">=</span> <span class="va">phy</span>,
                                   attribute_list <span class="op">=</span> <span class="va">att</span>,
                                   number_of_records <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">number_of_records</span>,
                                   alternate_identifier <span class="op">=</span> <span class="va">current</span><span class="op">$</span><span class="va">alternate_identifier</span><span class="op">)</span>
<span class="op">}</span></pre></div>
</div>
</div>
<div id="putting-it-all-together" class="section level2">
<h2 class="hasAnchor">
<a href="#putting-it-all-together" class="anchor"></a>Putting It All Together</h2>
<p>Now that we have all of the items appended to the <code>parent_element</code>, we must append it to the “dataset” and also give the file a unique ID number.</p>
<div class="sourceCode" id="cb24"><pre class="downlit">
<span class="va">eml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>packageId <span class="op">=</span> <span class="st">"uuid::UUIDgenerate()"</span>,
            system <span class="op">=</span> <span class="st">"uuid"</span>,
            dataset <span class="op">=</span> <span class="va">parent_element</span><span class="op">)</span></pre></div>
<p>We now have all necessary elements to create a working EML document. The final step is to convert it into the correct format. To do so, we can use the EML library’s <code>write_eml</code> function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit">
<span class="fu">EML</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/EML/reference/write_eml.html">write_eml</a></span><span class="op">(</span><span class="va">eml</span>, <span class="st">"eml.xml"</span><span class="op">)</span></pre></div>
<pre><code>## NULL</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sadie Gill, Elizabeth Shaw.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
